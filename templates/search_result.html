{% extends "base.html" %}
{% block content %}
    {% if error_message %}
        {{ error_message }}
    {% elif search_results %}
        <ul>
            {% for publication in search_results %}
                <h4>Title</h4>
                {{ publication.title }}
                <h4>Abstract</h4>
                {{ publication.abstract }}
            {% endfor %}
        </ul>
        {% if curr_page > 1 %}
            <form method="POST" action="/search/">
                {% csrf_token %}
                {% for k, v in query_params.items %}
                    {% if k == "criteria" %}
                        {% for item in v %}
                            <input type="hidden" name="criteria" value="{{ item }}">
                        {% endfor %}
                    {% endif %}
                    {% if k == "match" %}
                        {% for item in v %}
                            <input type="hidden" name="match" value="{{ item }}">
                        {% endfor %}
                    {% endif %}
                    {% if k == "operator" %}
                        {% for item in v %}
                            <input type="hidden" name="operator" value="{{ item }}">
                        {% endfor %}
                    {% endif %}
                    {% if k == "search_field" %}
                        {% for item in v %}
                            <input type="hidden" name="search_field" value="{{ item }}">
                        {% endfor %}
                    {% endif %}
                {% endfor %}
                <input type="hidden" name="page" value="{{ curr_page|add:"-1" }}">
                <input type="hidden" name="limit" value="5">
                <input type="submit" value="Previous page">
            </form>
        {% endif %}

        {% if next_page > 0 %}
                <form method="POST" action="/search/">
                {% csrf_token %}
                {% for k, v in query_params.items %}
                    {% if k == "criteria" %}
                        {% for item in v %}
                            <input type="hidden" name="criteria" value="{{ item }}">
                        {% endfor %}
                    {% endif %}
                    {% if k == "match" %}
                        {% for item in v %}
                            <input type="hidden" name="match" value="{{ item }}">
                        {% endfor %}
                    {% endif %}
                    {% if k == "operator" %}
                        {% for item in v %}
                            <input type="hidden" name="operator" value="{{ item }}">
                        {% endfor %}
                    {% endif %}
                    {% if k == "search_field" %}
                        {% for item in v %}
                            <input type="hidden" name="search_field" value="{{ item }}">
                        {% endfor %}
                    {% endif %}
                {% endfor %}
                <input type="hidden" name="page" value="{{ next_page }}">
                <input type="hidden" name="limit" value="5">
                <input type="submit" value="Next page">
            </form>
        {% endif %}
    {% endif %}
{% endblock %}